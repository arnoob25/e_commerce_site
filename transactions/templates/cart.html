{% extends 'base.html' %}
{% load template_filters %}
{% block body %}
  <h1>Your Cart</h1>
  <div style="display: flex;">
    <div style="width: 70%; padding: 0px 30px 30px 0px;">
      {% for order in object_list %}
        {% with form=forms|get_item:order.id %}
          <div style="border: 1px solid #ccc; padding: 10px; margin-bottom: 10px;">
            <h2>{{ order.product.title }}</h2>
            <p>Unit Price: {{ order.unit_price }}</p>
            <form method="POST">
              {% csrf_token %}
              <input type="hidden" name="order_id" value="{{ order.id }}" />
              {{ form.as_p }}
              <button type="submit">Update Order</button>
            </form>
            <p>Discount: {{ order.discount }}%</p>
            <p>Final Cost: {{ order.final_cost }}</p>
          </div>
        {% endwith %}
        {% empty %}
        <p>Your cart is empty.</p>
      {% endfor %}
    </div>
    <div style="width: 30%; padding: 30px; border: 1px solid #ccc;">
      <h3>Subtotal: {{ subtotal }}</h3>
      <!-- Add address section here -->
      <!--Add payment section here-->
      <button>Checkout</button>
    </div>
  </div>
{% endblock %}
